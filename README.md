# go-server

–ü—Ä–æ—Å—Ç–æ–π –±–ª–æ–≥ –Ω–∞ Go —Å HTMX –∏ —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

## Stack

- **Backend**: Go 1.22+ —Å Chi router
- **Database**: SQLite —Å WAL —Ä–µ–∂–∏–º–æ–º
- **Frontend**: HTMX + Tailwind CSS (server-side rendering)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ –ø–∞–∫–µ—Ç—ã –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏:

```
go-server/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ       ‚îî‚îÄ‚îÄ main.go           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ models/               # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.go
‚îÇ   ‚îú‚îÄ‚îÄ repository/           # –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (Repository pattern)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ post_repository.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ comment_repository.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category_repository.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ like_repository.go
‚îÇ   ‚îú‚îÄ‚îÄ service/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (Service layer)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post_service.go
‚îÇ   ‚îú‚îÄ‚îÄ handlers/             # HTTP handlers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post_handler.go
‚îÇ   ‚îú‚îÄ‚îÄ middleware/           # Middleware
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logging.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recovery.go
‚îÇ   ‚îú‚îÄ‚îÄ database/             # –†–∞–±–æ—Ç–∞ —Å –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.go
‚îÇ   ‚îî‚îÄ‚îÄ templates/            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏
‚îÇ       ‚îî‚îÄ‚îÄ templates.go
‚îú‚îÄ‚îÄ templates/                # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ home.html
‚îÇ   ‚îú‚îÄ‚îÄ post_item.html
‚îÇ   ‚îî‚îÄ‚îÄ comment_item.html
‚îú‚îÄ‚îÄ bin/                      # –°–æ–±—Ä–∞–Ω–Ω—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ go.mod                    # Go –º–æ–¥—É–ª—å
‚îú‚îÄ‚îÄ go.sum                    # Checksums
‚îú‚îÄ‚îÄ Makefile                  # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã
‚îî‚îÄ‚îÄ README.md
```

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤

### cmd/server/
–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ë–î
- –°–æ–∑–¥–∞—ë—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç handlers
- –ó–∞–ø—É—Å–∫–∞–µ—Ç HTTP —Å–µ—Ä–≤–µ—Ä

### internal/models/
–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö:
- `Post` - –ø–æ—Å—Ç—ã –±–ª–æ–≥–∞
- `Comment` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `Category` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `Like` - –ª–∞–π–∫–∏

### internal/repository/
Repository pattern - —Ä–∞–±–æ—Ç–∞ —Å –ë–î:
- `PostRepository` - CRUD –ø–æ—Å—Ç–æ–≤
- `CommentRepository` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- `CategoryRepository` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- `LikeRepository` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∞–π–∫–∞–º–∏

### internal/service/
Service layer - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
- `PostService` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Å—Ç–∞–º–∏
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

### internal/handlers/
HTTP handlers:
- `PostHandler` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç service —Å–ª–æ–π
- –†–µ–Ω–¥–µ—Ä–∏—Ç —à–∞–±–ª–æ–Ω—ã

### internal/middleware/
Middleware –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `LoggingMiddleware` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- `RecoveryMiddleware` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–Ω–∏–∫

### internal/database/
–†–∞–±–æ—Ç–∞ —Å –ë–î:
- `InitDB()` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- `SeedDatabase()` - –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –í—Å–µ SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
3. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –º–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã
4. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
5. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–ª–æ–∏ (auth, validation, etc.)

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
make run
# –∏–ª–∏
go run ./cmd/server
```

### –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
```bash
make build
./bin/server
```

### –û—á–∏—Å—Ç–∫–∞ –ë–î –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
make clean
```

### –û—á–∏—Å—Ç–∏—Ç—å –ø–æ—Ä—Ç
```bash
make clear-port
```

## üìã API Endpoints

- `GET /` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ—Å—Ç–∞–º–∏
- `POST /posts` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç
- `DELETE /posts/{id}` - –£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç
- `POST /comments` - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–æ—Å—Ç—É
- `POST /likes` - –î–æ–±–∞–≤–∏—Ç—å –ª–∞–π–∫ –∫ –ø–æ—Å—Ç—É

## üé® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—Å—Ç–æ–≤
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç–∞–º
- ‚úÖ –°—á—ë—Ç—á–∏–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –ª–∞–π–∫–æ–≤
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π UI —Å Tailwind CSS
- ‚úÖ HTMX –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–µ–∑ JavaScript
- ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

## üèÉ‚Äç‚ôÇÔ∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

1. –î–æ–±–∞–≤—å—Ç–µ –º–æ–¥–µ–ª—å –≤ `internal/models/models.go`
2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ `internal/repository/`
3. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥—ã –≤ service –≤ `internal/service/post_service.go`
4. –°–æ–∑–¥–∞–π—Ç–µ handler –≤ `internal/handlers/post_handler.go`
5. –î–æ–±–∞–≤—å—Ç–µ —Ä–æ—É—Ç—ã –≤ `cmd/server/main.go`
6. –°–æ–∑–¥–∞–π—Ç–µ —à–∞–±–ª–æ–Ω –≤ `templates/`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

–î–æ–±–∞–≤—å—Ç–µ SQL –≤ –º–∞—Å—Å–∏–≤ `migrations` –≤ `internal/database/database.go`:

```go
const createMyTable = `
CREATE TABLE IF NOT EXISTS my_table (...)
`
```

## üìö –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- [Chi](https://github.com/go-chi/chi) - HTTP router
- [HTMX](https://htmx.org/) - HTML over the wire
- [Tailwind CSS](https://tailwindcss.com/) - Utility-first CSS
- [SQLite](https://www.sqlite.org/) - Embedded database
